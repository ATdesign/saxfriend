// SVG fingering chart
var SF_ALTO_SAX_CHART_K = 2.0784;
var SF_ALTO_SAX_CHART_W = 250; // Default width. To get height, use H=K*W
var SF_ALTO_SAX_CHART = "<?xml version=\"1.0\" encoding=\"UTF-8\"?><svg width=\"{{{WIDTH}}}\" height=\"{{{HEIGHT}}}\" version=\"1.1\" viewBox=\"0 0 66.885 139.01\" xmlns=\"http://www.w3.org/2000/svg\"> <g transform=\"translate(-72.667 -68.735)\" fill=\"none\" stroke=\"#000\">  <g>   <g stroke-width=\".52917\">    <path class=\"sf-sax-left sf-sax-key sf-sax-l1\" d=\"m105.41 92.326a5.6696 5.6696 0 0 1-5.6696 5.6696 5.6696 5.6696 0 0 1-5.6696-5.6696 5.6696 5.6696 0 0 1 5.6696-5.6696 5.6696 5.6696 0 0 1 5.6696 5.6696z\"/>    <path class=\"sf-sax-left sf-sax-key sf-sax-l2\" d=\"m105.41 108.44a5.6696 5.6696 0 0 1-5.6696 5.6696 5.6696 5.6696 0 0 1-5.6696-5.6696 5.6696 5.6696 0 0 1 5.6696-5.6696 5.6696 5.6696 0 0 1 5.6696 5.6696z\"/>    <path class=\"sf-sax-left sf-sax-key sf-sax-l3\" d=\"m105.41 124.26a5.6696 5.6696 0 0 1-5.6696 5.6696 5.6696 5.6696 0 0 1-5.6696-5.6696 5.6696 5.6696 0 0 1 5.6696-5.6696 5.6696 5.6696 0 0 1 5.6696 5.6696z\"/>    <path class=\"sf-sax-left sf-sax-key sf-sax-l6\" d=\"m112.16 100.26a3.5908 3.5908 0 0 1-3.5908 3.5908 3.5908 3.5908 0 0 1-3.5908-3.5908 3.5908 3.5908 0 0 1 3.5908-3.5908 3.5908 3.5908 0 0 1 3.5908 3.5908z\"/>    <path class=\"sf-sax-left sf-sax-key sf-sax-l4\" transform=\"rotate(54.702)\" d=\"m125.73-35.195a2.8348 6.3783 0 0 1-2.8348 6.3783 2.8348 6.3783 0 0 1-2.8348-6.3783 2.8348 6.3783 0 0 1 2.8348-6.3783 2.8348 6.3783 0 0 1 2.8348 6.3783z\"/>   </g>   <g stroke-width=\".52917\">    <path class=\"sf-sax-left sf-sax-key sf-sax-l8\" transform=\"matrix(.97809 -.20817 .21049 .9776 0 0)\" d=\"m103.57 108.94a3.2549 7.2924 0 0 1-3.2549 7.2924 3.2549 7.2924 0 0 1-3.2549-7.2924 3.2549 7.2924 0 0 1 3.2549-7.2924 3.2549 7.2924 0 0 1 3.2549 7.2924z\"/>    <path class=\"sf-sax-left sf-sax-key sf-sax-l9\" transform=\"matrix(.98114 -.19329 .19563 .98068 0 0)\" d=\"m111.44 117.73a3.2549 7.2924 0 0 1-3.2549 7.2924 3.2549 7.2924 0 0 1-3.2549-7.2924 3.2549 7.2924 0 0 1 3.2549-7.2924 3.2549 7.2924 0 0 1 3.2549 7.2924z\"/>    <path class=\"sf-sax-left sf-sax-key sf-sax-l7\" transform=\"matrix(.97531 -.22082 .22316 .97478 0 0)\" d=\"m96.344 121.28a3.3463 7.497 0 0 1-3.3463 7.497 3.3463 7.497 0 0 1-3.3463-7.497 3.3463 7.497 0 0 1 3.3463-7.497 3.3463 7.497 0 0 1 3.3463 7.497z\"/>   </g>   <path d=\"m94.541 135.98h10.158\" stroke-width=\".52917\"/>  </g>  <path class=\"sf-sax-left sf-sax-key sf-sax-l5\" d=\"m82.129 84.715c0.39255-0.21298 7.262 4.9651 8.0652 9.1229 0.43192 1.9536 0.58911 3.8757-0.86226 5.2917-0.78451-0.05989-0.52402-2.6395-2.7403-3.9688-0.99251-0.57096-2.1497-0.69689-2.823-0.94494-0.63656-1.2127-2.0164-7.4229-2.0586-9.1483-0.0074-0.3042 0.41903-0.35251 0.41903-0.35251z\" stroke-width=\".52917\"/>  <g>   <g stroke-width=\".52917\">    <path class=\"sf-sax-right sf-sax-key sf-sax-r6\" d=\"m81.451 121.2h1.9991c1.0556 0 1.9054 0.8498 1.9054 1.9054v5.6094c0 1.0556-0.8498 1.9054-1.9054 1.9054h-1.9991c-1.0556 0-1.9054-0.8498-1.9054-1.9054v-5.6094c0-1.0556 0.8498-1.9054 1.9054-1.9054z\"/>    <path class=\"sf-sax-right sf-sax-key sf-sax-r7\" d=\"m81.451 131.89h1.9991c1.0556 0 1.9054 0.8498 1.9054 1.9054v5.6094c0 1.0556-0.8498 1.9054-1.9054 1.9054h-1.9991c-1.0556 0-1.9054-0.84979-1.9054-1.9054v-5.6094c0-1.0556 0.8498-1.9054 1.9054-1.9054z\"/>    <path class=\"sf-sax-right sf-sax-key sf-sax-r8\" d=\"m81.451 142.48h1.9991c1.0556 0 1.9054 0.8498 1.9054 1.9054v5.6094c0 1.0556-0.8498 1.9054-1.9054 1.9054h-1.9991c-1.0556 0-1.9054-0.8498-1.9054-1.9054v-5.6094c0-1.0556 0.8498-1.9054 1.9054-1.9054z\"/>    <path class=\"sf-sax-right sf-sax-key sf-sax-r1\" d=\"m105.41 147.33a5.6696 5.6696 0 0 1-5.6696 5.6696 5.6696 5.6696 0 0 1-5.6696-5.6696 5.6696 5.6696 0 0 1 5.6696-5.6696 5.6696 5.6696 0 0 1 5.6696 5.6696z\"/>    <path class=\"sf-sax-right sf-sax-key sf-sax-r2\" d=\"m105.41 163.81a5.6696 5.6696 0 0 1-5.6696 5.6696 5.6696 5.6696 0 0 1-5.6696-5.6696 5.6696 5.6696 0 0 1 5.6696-5.6696 5.6696 5.6696 0 0 1 5.6696 5.6696z\"/>    <path class=\"sf-sax-right sf-sax-key sf-sax-r3\" d=\"m105.41 179.45a5.6696 5.6696 0 0 1-5.6696 5.6696 5.6696 5.6696 0 0 1-5.6696-5.6696 5.6696 5.6696 0 0 1 5.6696-5.6696 5.6696 5.6696 0 0 1 5.6696 5.6696z\"/>   </g>   <path class=\"sf-sax-right sf-sax-key sf-sax-r4\" transform=\"scale(.26458)\" d=\"m376.96 709.66a25.179 21.429 0 0 0-25.18 21.43 25.179 21.429 0 0 0 0.0351 0.83593h50.273a25.179 21.429 0 0 0 0.0488-0.83593 25.179 21.429 0 0 0-25.178-21.43z\" stroke-width=\"2\"/>   <path class=\"sf-sax-right sf-sax-key sf-sax-r5\" d=\"m99.738 200.87a6.6618 5.6696 0 0 0 6.6621-5.6699 6.6618 5.6696 0 0 0-9e-3 -0.22118h-13.302a6.6618 5.6696 0 0 0-0.0129 0.22118 6.6618 5.6696 0 0 0 6.6616 5.6699z\" stroke-width=\".52917\"/>   <g stroke-width=\"2\">    <path class=\"sf-sax-right sf-sax-key sf-sax-r9\" transform=\"scale(.26458)\" d=\"m336 571.73c-1.6089-1e-5 -2.9043 1.2954-2.9043 2.9043 0 0 0.17858 14.265-0.22321 17.725-0.0446 1.1607-6.2534 16.496-6.2534 16.496-0.58799 1.4976-0.23581 4.0615 1.2618 4.6495l11.754 4.6133c1.4976 0.588 4.0922-0.93759 4.6802-2.4352 9.5109-15.278 7.9664-25.461 7.2162-41.048-0.0717-1.6073-1.2954-2.9043-2.9043-2.9043z\"/>    <path class=\"sf-sax-right sf-sax-key sf-sax-r10\" transform=\"scale(.26458)\" d=\"m329.87 626.03c-1.5688 0-2.832 1.2632-2.832 2.832v39.461c0 1.5688 1.2632 2.832 2.832 2.832h11.256c1.5688 0 3.4996-4.2074 3.8594-5.7344 2.0889-6.8166 1.5335-7.9662 6.6113-11.25v-11.156c-5.0778-3.2838-4.5224-4.4334-6.6113-11.25-0.3598-1.527-2.2906-5.7344-3.8594-5.7344z\"/>    <path class=\"sf-sax-left sf-sax-key sf-sax-l10\" transform=\"scale(.26458)\" d=\"m431.34 472.76c-1.3862 8e-3 -2.852 0.0296-4.2969 0.0723-4.9341 0.14562-9.4252 0.35998-11.814 3.1094-1.8845 2.3482-2.1687 5.9027-1.0078 8.0938 5.6806 3.8345 16.682 7.7383 24.719 7.5566 8.0371 0.18164 19.038-3.7222 24.719-7.5566 1.1609-2.191 0.87669-5.7456-1.0078-8.0938-2.3892-2.7495-6.8804-2.9639-11.814-3.1094-5.7796-0.17061-11.896 0-11.896 0s-3.441-0.0963-7.5996-0.0723z\"/>   </g>   <path class=\"sf-sax-left sf-sax-key sf-sax-l11\" d=\"m108.07 134.5c-0.15991-1.1493-0.25211-2.4176 0.23719-3.499 0.65487-1.5372 1.9419-0.80241 2.6754-0.57767 0 0 3.1406 1.0266 4.1105 1.7897 0.33296 0.28813 0.54315 3.1178-0.58488 4.0785-1.1773 0.73709-3.3479 0.47102-4.6619 0.49762-1.3109-0.13604-1.6712-1.1227-1.7763-2.2892z\" stroke-width=\".52917\"/>   <path class=\"sf-sax-left sf-sax-key sf-sax-l12\" d=\"m124.15 134.6c0.15991-1.1493 0.25211-2.4176-0.23719-3.499-0.65487-1.5372-1.9419-0.80241-2.6754-0.57767 0 0-3.1406 1.0266-4.1105 1.7897-0.33296 0.28813-0.54315 3.1178 0.58488 4.0785 1.1773 0.73709 3.3479 0.47102 4.6619 0.49762 1.3109-0.13604 1.6712-1.1227 1.7763-2.2892z\" stroke-width=\".52917\"/>   <path class=\"sf-sax-left sf-sax-key sf-sax-l13\" transform=\"scale(.26458)\" d=\"m431.34 522.39c-1.3862 8e-3 -2.852 0.0335-4.2969 0.0781-4.9341 0.15874-10.31-0.55494-12.699 2.4434-1.8845 2.5606-2.0415 8.1414-0.12304 10.973 5.6806 4.1814 16.682 7.2391 24.719 7.041 8.0371 0.19808 19.038-2.8596 24.719-7.041 1.9183-2.8312 1.7615-8.412-0.12305-10.973-2.3892-2.9983-7.7651-2.2846-12.699-2.4434-1.4449-0.0442-2.9107-0.0706-4.2969-0.0781-4.1586-0.0265-7.5996 0.0781-7.5996 0.0781s-3.441-0.10461-7.5996-0.0781z\" stroke-width=\"2\"/>  </g> </g></svg>";

var SF_ALTO_SAX_C_PREV = '.sax-chart-prev';
var SF_ALTO_SAX_C_NOW = '.sax-chart-now';
var SF_ALTO_SAX_C_NEXT = '.sax-chart-next';


// Insert fingering chart into container by container width
function insert_alto_sax_chart(c_class){
    if (c_class[0] !== "."){c_class = "."+c_class};
    
    var cont_width = parseFloat(d3.select(c_class).style("width"));
    var cont_height = SF_ALTO_SAX_CHART_K * cont_width;
    var my_chart = SF_ALTO_SAX_CHART
            .replace("{{{WIDTH}}}", Math.round(cont_width))
            .replace("{{{HEIGHT}}}", Math.round(cont_height));
    d3.select(c_class).html(my_chart);
}

function prepare_alto_sax_chart(){
    // Add the three visualization elements
    insert_alto_sax_chart(SF_ALTO_SAX_C_PREV);
    insert_alto_sax_chart(SF_ALTO_SAX_C_NOW);
    insert_alto_sax_chart(SF_ALTO_SAX_C_NEXT);
}